(function(t){function s(s){for(var e,r,o=s[0],c=s[1],l=s[2],g=0,d=[];g<o.length;g++)r=o[g],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&d.push(a[r][0]),a[r]=0;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(t[e]=c[e]);u&&u(s);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,s=0;s<i.length;s++){for(var n=i[s],e=!0,o=1;o<n.length;o++){var c=n[o];0!==a[c]&&(e=!1)}e&&(i.splice(s--,1),t=r(r.s=n[0]))}return t}var e={},a={app:0},i=[];function r(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,s,n){r.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,s){if(1&s&&(t=r(t)),8&s)return t;if(4&s&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var e in t)r.d(n,e,function(s){return t[s]}.bind(null,e));return n},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,s,n){t.exports=n("56d7")},"0e67":function(t,s,n){"use strict";var e=n("eac3"),a=n.n(e);a.a},2395:function(t,s,n){},"25d9":function(t,s,n){"use strict";var e=n("e8ad"),a=n.n(e);a.a},"4b5e":function(t,s,n){"use strict";var e=n("9753"),a=n.n(e);a.a},"4ce2":function(t,s,n){},"56d7":function(t,s,n){"use strict";n.r(s);n("e260"),n("e6cf"),n("cca6"),n("a79d");var e=n("2b0e"),a=(n("d3b7"),n("bc3a")),i=n.n(a),r=n("2f62");e["a"].use(r["a"]);var o=new r["a"].Store({state:{loading:!1},mutations:{showLoading:function(t){t.loading=!0},hideLoading:function(t){t.loading=!1}}}),c=o,l={baseURL:"https://music.kele8.cn"},u=i.a.create(l);u.interceptors.request.use((function(t){return c.commit("showLoading"),t}),(function(t){return Promise.reject(t)})),u.interceptors.response.use((function(t){return c.commit("hideLoading"),c.state.loading=!1,t}),(function(t){return Promise.reject(t)})),Plugin.install=function(t,s){t.axios=u,window.axios=u,Object.defineProperties(t.prototype,{axios:{get:function(){return u}},$axios:{get:function(){return u}}})},e["a"].use(Plugin);Plugin;var g=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{style:{"padding-bottom":null!=t.currentSong?"30px":"0px"},attrs:{id:"app"},on:{touchstart:t.touchstart,touchend:t.touchend}},[n("keep-alive",[n("router-view",{attrs:{currentSong:t.currentSong},on:{"translate-song":function(s){t.currentSong=s},showLoading:function(s){t.showLoading=s}}})],1),t.currentSong?n("PlaySongList",{attrs:{currentSong:t.currentSong},on:{"translate-song":function(s){t.currentSong=s}}}):t._e(),n("loading",{staticClass:"loading",attrs:{showLoading:this.$store.state.loading}})],1)},d=[],h=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"musicPlayList"},[n("div",{staticClass:"musicPlayBottom",on:{click:function(s){s.stopPropagation(),t.showSongDetail=!0}}},[n("div",{staticClass:"cover"},[n("img",{staticClass:"thumb",class:{active:this.playing},attrs:{src:t.currentSong.picUrl?t.currentSong.picUrl:t.currentSong.al.picUrl}})]),n("div",{staticClass:"song"},[n("h5",[t._v(t._s(t.currentSong.name))]),n("span",[t._v(t._s(t.cngArtist(t.currentSong.ar||t.currentSong.song.artists)))])]),n("div",{staticClass:"status",staticStyle:{width:"30px",height:"30px"},on:{click:function(s){s.stopPropagation(),t.playing=!t.playing}}},[n("canvas",{attrs:{id:"canvas",width:"30",height:"30"}}),t.playing?n("i",{staticClass:"fa fa-pause"}):n("i",{staticClass:"fa fa-play"})]),n("div",{staticClass:"list",on:{click:function(s){s.stopPropagation(),t.showList=!t.showList}}},[n("i",{staticClass:"fa fa-bars"})])]),n("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[t.showList?n("ul",{staticClass:"playList"},t._l(t.playList,(function(s,e){return n("li",{key:e},[n("track-songs",{attrs:{currentSong:t.currentSong,trackSongs:s,news:s.news,order:e},on:{"translate-song":function(s){return t.$emit("translate-song",s)}}})],1)})),0):t._e()]),n("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated fadeInUp","leave-active-class":"animated fadeOutDown"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSongDetail,expression:"showSongDetail"}],staticClass:"songDetail"},[n("div",{staticClass:"black"}),n("div",{staticClass:"mask",style:{backgroundImage:"url("+(t.currentSong.picUrl?t.currentSong.picUrl:t.currentSong.al.picUrl)+")"}}),n("header",[n("div",{staticClass:"back",on:{click:function(s){t.showSongDetail=!1}}},[n("i",{staticClass:"fa fa-angle-left"})]),n("div",{staticClass:"info"},[n("h3",[t._v(t._s(t.currentSong.name))]),n("span",[t._v(t._s(t.cngArtist(t.currentSong.ar||t.currentSong.song.artists)))])]),n("div",{staticClass:"share"},[n("i",{staticClass:"fa fa-share-alt-square"})])]),n("main",{class:{active:t.playing}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showCircle,expression:"showCircle"}],staticClass:"glue",on:{click:function(s){t.showCircle=!1}}},[n("div",{staticClass:"needle"}),n("div",{staticClass:"vinyl",on:{click:function(s){t.showAllLyric=!0}}},[n("img",{attrs:{src:t.currentSong.picUrl?t.currentSong.picUrl:t.currentSong.al.picUrl}})])]),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showCircle,expression:"!showCircle"}],staticClass:"lyric",on:{click:function(s){t.showCircle=!0}}},[n("ul",{staticClass:"scroll",style:{transform:"translateY("+28*-t.currentLyricIndex+"px)"}},t._l(t.fillterLyric,(function(s,e){return n("li",{key:e,class:{active:e===t.currentLyricIndex}},[t._v(" "+t._s(s.text))])})),0)])]),n("footer",[n("div",{staticClass:"tools"},[n("div",{on:{click:function(s){t.loving=!t.loving}}},[n("i",{staticClass:"fa fa-heart",style:{color:t.loving?"red":"white"}})]),n("i",{staticClass:"fa fa-comments",on:{click:function(s){t.showComments="true"}}}),n("i",{staticClass:"fa fa-ellipsis-v"})]),n("div",{staticClass:"progress"},[n("span",[t._v(t._s(t.startTime))]),n("div",{staticClass:"range"},[n("input",{staticClass:"progress-range",attrs:{type:"range",value:"circleWidth",min:"0",step:"0.01",max:"100"},on:{input:function(s){return t.rangeDrag()}}}),n("div",{staticClass:"circle"})]),n("span",[t._v(t._s(t.songDuration))])]),n("div",{staticClass:"status"},[n("i",{staticClass:"fa fa-step-backward",on:{click:function(s){return t.cngSongPlay(t.prevSong)}}}),n("div",{on:{click:function(s){s.stopPropagation(),t.playing=!t.playing}}},[t.playing?n("i",{staticClass:"fa fa-pause"}):n("i",{staticClass:"fa fa-play"})]),n("i",{staticClass:"fa fa-step-forward",on:{click:function(s){return t.cngSongPlay(t.nextSong)}}})])]),n("transition",{attrs:{name:"custom-classes-transition","enter-active-class":"animated slideInUp","leave-active-class":"animated slideOutDown"}},[n("SongComments",{directives:[{name:"show",rawName:"v-show",value:t.showComments,expression:"showComments"}],attrs:{comments:t.songComments,currentSong:t.currentSong},on:{showComList:function(s){t.showComments=s}}})],1)],1)]),n("audio",{staticStyle:{height:"0"},attrs:{src:t.currentSongUrl,controls:"",autoplay:""}})],1)},f=[],p=(n("c975"),n("a15b"),n("d81d"),n("45fc"),n("b0c0"),n("a9e3"),n("ac1f"),n("466d"),n("841c"),n("1276"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"trackSongList",on:{click:function(s){return t.$emit("translate-song",t.trackSongs)}}},[t.news?[void 0!==t.order?e("span",{staticClass:"order"},[t._v(t._s(t.cngNum(t.order+1)))]):t._e(),e("div",{staticClass:"main",style:{"margin-left":void 0!==t.order?"0px":"15px"}},[e("h3",[e("span",[t._v(t._s(t.trackSongs.name))]),0!=t.trackSongs.song.alias.length?e("span",{staticClass:"alias"},[t._v("("+t._s(t.trackSongs.song.alias[0])+")")]):t._e()]),e("div",{staticClass:"info"},[e("i",{staticClass:"icon icon-quality"}),e("span",[t._v(t._s(t.artistConnect(t.trackSongs.song.artists)))]),e("span",{staticClass:"album"},[t._v("-"+t._s(t.trackSongs.song.artists.name))])])]),t.currentSong&&t.trackSongs.id===t.currentSong.id?e("img",{staticClass:"icon icon-play",staticStyle:{background:"none"},attrs:{src:n("803f"),alt:""}}):e("i",{staticClass:"icon icon-play"})]:[void 0!==t.order?e("span",{staticClass:"order",class:{active:t.order<3}},[t._v(t._s(t.cngNum(t.order+1)))]):t._e(),e("div",{staticClass:"main"},[e("h3",[e("span",[t._v(t._s(t.trackSongs.name))]),0!=t.trackSongs.alia.length?e("span",{staticClass:"alias"},[t._v("("+t._s(t.trackSongs.alia[0])+")")]):t._e()]),e("div",{staticClass:"info"},[e("i",{staticClass:"icon icon-quality"}),e("span",[t._v(t._s(t.artistConnect(t.trackSongs.ar)))]),e("span",{staticClass:"album"},[t._v("-"+t._s(t.trackSongs.al.name))])])]),t.currentSong&&t.trackSongs.id===t.currentSong.id?e("img",{staticClass:"icon icon-play",staticStyle:{background:"none"},attrs:{src:n("803f"),alt:""}}):e("i",{staticClass:"icon icon-play"})]],2)}),m=[],v={name:"track-songs",props:{order:Number,trackSongs:Object,news:Boolean,currentSong:Object},methods:{artistConnect:function(t){return t.map((function(t){return t.name})).join(" / ")},cngNum:function(t){return t<10?"0"+t:t}}},S=v,w=(n("f13d"),n("2877")),C=Object(w["a"])(S,p,m,!1,null,"059e8890",null),y=C.exports,_=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"comments"},[n("header",[n("i",{staticClass:"fa fa-angle-left",on:{click:function(s){return t.$emit("showComList",!1)}}}),n("h3",[t._v("评论("+t._s(t.comments.total)+")")]),n("img",{attrs:{src:t.currentSong.picUrl?t.currentSong.picUrl:t.currentSong.al.picUrl,alt:""}})]),n("div",{staticClass:"control"},[n("span",[t._v("按"+t._s(t.showDeff)+"排序")]),n("div",{staticClass:"sort"},[n("span",{on:{click:function(s){t.showSort=!t.showSort}}},[t._v(t._s(t.showDeff)),n("i",{staticClass:"fa fa-caret-down"})]),n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showSort,expression:"showSort"}]},[n("li",{on:{click:function(s){return t.cngList(1)}}},[t._v("热门")]),n("li",{on:{click:function(s){return t.cngList(2)}}},[t._v("最新")])])])]),n("main",[t.showLeast?t._l(t.comments.comments,(function(s,e){return n("ul",{key:e,staticClass:"least"},[n("li",{staticClass:"commentList"},[n("div",{staticClass:"lt"},[n("img",{attrs:{src:s.user.avatarUrl,alt:""}})]),n("div",{staticClass:"rt"},[n("div",{staticClass:"header"},[n("div",{staticClass:"left"},[n("h3",[t._v(t._s(s.user.nickname))]),n("span",[t._v(t._s(t.cngTime(s.time)))])]),n("div",{staticClass:"right"},[t._v(t._s(s.likedCount)),n("i",{staticClass:"fa fa-thumbs-o-up"})])]),n("div",{staticClass:"main"},[t._v(t._s(s.content))])])])])})):t._l(t.comments.hotComments,(function(s,e){return n("ul",{key:e,staticClass:"hot"},[n("li",{staticClass:"commentList"},[n("div",{staticClass:"lt"},[n("img",{attrs:{src:s.user.avatarUrl,alt:""}})]),n("div",{staticClass:"rt"},[n("div",{staticClass:"header"},[n("div",{staticClass:"left"},[n("h3",[t._v(t._s(s.user.nickname))]),n("span",[t._v(t._s(t.cngTime(s.time)))])]),n("div",{staticClass:"right"},[t._v(t._s(s.likedCount)),n("i",{staticClass:"fa fa-thumbs-o-up"})])]),n("div",{staticClass:"main"},[t._v(t._s(s.content))])])])])}))],2)])},L=[],k={name:"SongComments",props:{comments:Object,currentSong:Object},data:function(){return{showSort:!1,showDeff:"热门",showLeast:!1}},methods:{cngTime:function(t){var s=new Date(t),n=s.getFullYear(),e=s.getMonth()+1,a=s.getDate(),i=s.getHours(),r=s.getMinutes(),o=s.getSeconds();return i=i<10?"0"+i:i,r=r<10?"0"+r:r,o=o<10?"0"+o:o,n+"年"+e+"月"+a+"日"+i+"时"+r+"分"+o},cngList:function(t){this.showDeff=1==t?"热门":"最新",this.showLeast=1!=t,this.showSort=!1}}},x=k,b=(n("9b17"),Object(w["a"])(x,_,L,!1,null,"26c86220",null)),T=b.exports,D={name:"PlaySongList",data:function(){return{playing:!0,showList:!1,playList:[],showSongDetail:!1,showLyric:null,loving:!1,startTime:null,songDuration:null,circleWidth:null,showCircle:!0,currentLyricIndex:0,songComments:null,showComments:!1,currentSongIndex:0}},components:{TrackSongs:y,SongComments:T},props:{currentSong:Object},methods:{drowStatus:function(){var t=this,s=this.$el.querySelector("#canvas"),n=this.$el.querySelector("audio"),e=this.currentSong.dt?this.currentSong.dt:this.currentSong.song.duration;n.ontimeupdate=function(){var a=s.getContext("2d");a.clearRect(0,0,30,30),a.beginPath(),a.arc(15,15,13,0,2*Math.PI),a.closePath(),a.strokeStyle="lightgray",a.lineWidth="1",a.stroke(),a.beginPath(),a.arc(15,15,13,-.5*Math.PI,-.5*Math.PI+2*Math.PI*(1e3*n.currentTime/e)),a.strokeStyle="rgba(255,0,0,0.7)",a.lineWidth="1",a.stroke();var i,r=n.currentTime/n.duration*100;t.circleWidth=Math.floor(r)+"%",t.startTime=t.timeCng(n.currentTime),t.$el.querySelector(".range input").value=r,t.$el.querySelector(".range .circle").style.width=r+"%";for(var o=0;o<t.fillterLyric.length;o++)if(n.currentTime+.15<t.fillterLyric[o].time){i=o-1;break}void 0===i&&(i=t.fillterLyric.length-1),t.currentLyricIndex=i}},cngArtist:function(t){return t.map((function(t){return t.name})).join("/")},getLyric:function(){var t=this,s=window.localStorage.getItem("lyric"+this.currentSong.id);s?this.showLyric=s:window.axios.get("lyric",{params:{id:this.currentSong.id}}).then((function(s){t.showLyric=s.data.lrc.lyric,window.localStorage.setItem("lyric"+t.currentSong.id,s.data.lrc.lyric)}))},getComment:function(){var t=this,s=JSON.parse(window.localStorage.getItem("comments"+this.currentSong.id));s&&s.expire>Date.now()?this.songComments=s.result:window.axios.get("/comment/music",{params:{id:this.currentSong.id}}).then((function(s){t.songComments=s.data,window.localStorage.setItem("comments"+t.currentSong.id,JSON.stringify({expire:Date.now()+36e5,result:s.data}))}))},timeCng:function(t){var s=parseInt(t/60%60),n=parseInt(t%60);return s=s<10?"0"+s:s,n=n<10?"0"+n:n,s+":"+n},rangeDrag:function(){var t=this.$el.querySelector("audio");t.currentTime=this.$el.querySelector(".range input").value*t.duration/100},cngSongPlay:function(t){this.currentSong=this.playList[t],this.$emit("translate-song",this.playList[t])}},computed:{currentSongUrl:function(){return"https://music.163.com/song/media/outer/url?id=".concat(this.currentSong.id,".mp3")},fillterLyric:function(){return this.showLyric?this.showLyric.split("\n").map((function(t){var s=/\d{2}:\d{2}\.\d+/i;if(-1!==t.search(s)){var n=t.match(s)[0],e=n.substr(0,2),a=n.substr(3,2),i=n.substr(5);return{time:60*Number(e)+Number(a)+Number(i),text:t.substr(11)||"---------"}}return{}})):"暂时未有歌词"},prevSong:function(){return 0==this.currentSongIndex?this.playList.length-1:this.currentSongIndex-1},nextSong:function(){return this.currentSongIndex==this.playList.length-1?0:this.currentSongIndex+1}},watch:{playing:function(t){var s=this.$el.querySelector("audio");t?s.play():s.pause()},currentSong:function(t){var s=this,n=this.playList.some((function(n){return s.currentSongIndex=s.playList.indexOf(s.currentSong),n.id==t.id}));n||(void 0!=t.song?t.news=!0:t.news=!1,this.playList.push(t),this.currentSongIndex=this.playList.length-1)}},created:function(){this.getLyric(),this.getComment(),void 0!=this.currentSong.song?this.currentSong.news=!0:this.currentSong.news=!1,this.playList.push(this.currentSong),this.songDuration=this.timeCng((this.currentSong.dt?this.currentSong.dt:this.currentSong.song.duration)/1e3)},mounted:function(){var t=this;this.drowStatus();var s=this.$el.querySelector("audio");s.onplay=function(){t.playing=!0},s.onpause=function(){t.playing=!1}}},O=D,j=(n("a841"),Object(w["a"])(O,h,f,!1,null,"daae688e",null)),I=j.exports,P=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.showLoading?e("div",{staticClass:"loading"},[e("img",{attrs:{src:n("803f"),alt:""}})]):t._e()},$=[],N={name:"Loading",props:{showLoading:Boolean}},U=N,M=Object(w["a"])(U,P,$,!1,null,"79d6a810",null),H=M.exports,q={components:{PlaySongList:I,Loading:H},data:function(){return{currentSong:null,touchstartX:0,showSongDetail:!1}},methods:{touchstart:function(t){this.touchstartX=t.changedTouches[0].clientX,this.touchstartY=t.changedTouches[0].clientY},touchend:function(t){t.changedTouches[0].clientX-this.touchstartX>80&&(this.touchstartX=0,this.touchstartY=0,this.routerBack()),t.changedTouches[0].clientX-this.touchstartX<-80&&(this.touchstartX=0,this.touchstartY=0,this.routerForward())},routerBack:function(){this.$router.back()},routerForward:function(){this.$router.forward()}}},E=q,J=(n("7c55"),Object(w["a"])(E,g,d,!1,null,null,null)),W=J.exports,z=n("8c4f"),R=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"home"},[n("HomeLink"),n("div",{staticClass:"personalized"},[n("HomeTitle",[t._v("推荐歌单")]),n("ul",{staticClass:"showPersonalized"},t._l(t.showMusicList(),(function(t,s){return n("MusicList",{key:s,attrs:{songList:t}})})),1)],1),n("ul",{staticClass:"recommend"},[n("HomeTitle",[t._v("推荐音乐")]),t._l(t.newSongList,(function(s,e){return n("track-songs",{key:e,attrs:{trackSongs:s,news:!0,currentSong:t.currentSong},on:{"translate-song":function(s){return t.$emit("translate-song",s)}}})}))],2)],1)},X=[],B=(n("fb6a"),n("2909")),F=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ul",{attrs:{id:"nav"}},[n("li",[n("router-link",{attrs:{to:"/"}},[t._v("推荐音乐")])],1),n("li",[n("router-link",{attrs:{to:"/hot"}},[t._v("热歌榜")])],1),n("li",[n("router-link",{attrs:{to:"/search"}},[t._v("搜索")])],1)])},Y=[],A={name:"HomeLink"},G=A,K=(n("0e67"),Object(w["a"])(G,F,Y,!1,null,"e526d084",null)),Q=K.exports,Z=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"box"},[n("p",[t._t("default")],2)])},V=[],tt={name:"HomeTitle"},st=tt,nt=(n("b639"),Object(w["a"])(st,Z,V,!1,null,"3e56925e",null)),et=nt.exports,at=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("li",{staticClass:"card",on:{click:function(s){return t.detailList(t.songList.id)}}},[n("div",{staticClass:"pic"},[n("img",{attrs:{src:t.songList.picUrl,alt:""}}),n("span",[n("i",{staticClass:"fa fa-headphones"}),t._v(t._s(t.returnCount(t.songList.playCount)))])]),n("h5",[t._v(t._s(t.songList.name))])])},it=[],rt=(n("b680"),{name:"MusicList",props:{songList:{type:Object,default:function(){return{id:4969079749,type:0,name:"欧美 | 欢快小调拯救你的不开心",copywriter:"编辑推荐：音乐是治愈人心的良药",picUrl:"https://p2.music.126.net/nflx5ZxSSPivvGnyS5WRGw==/109951164906376339.jpg",canDislike:!1,trackNumberUpdateTime:1586934907095,playCount:1209355,trackCount:100,highQuality:!1,alg:"featured"}}}},methods:{returnCount:function(t){return t>1e8?(t/1e8).toFixed(1)+"亿":t>1e4?(t/1e4).toFixed(1)+"万":t},detailList:function(t){this.$router.push({path:"personalized",query:{id:t}})}}}),ot=rt,ct=(n("f33d"),Object(w["a"])(ot,at,it,!1,null,"dd42eb4a",null)),lt=ct.exports,ut={name:"Home",components:{HomeLink:Q,HomeTitle:et,MusicList:lt,TrackSongs:y},props:{currentSong:Object},data:function(){return{musicList:[],newSongList:[]}},methods:{getPersonalized:function(){var t=this;window.axios.get("/personalized").then((function(s){t.musicList=s.data.result,window.localStorage.setItem("personalized",JSON.stringify({expire:1*Date.now()*60*60*1e3,result:s.data.result}))})).catch((function(t){console.log(t)}))},getNewSong:function(){var t=this;this.axios.get("/personalized/newsong").then((function(s){t.newSongList=s.data.result,window.localStorage.setItem("newSongList",JSON.stringify({expire:Date.now()+432e5,result:t.newSongList}))})).catch((function(t){console.log(t)}))},showMusicList:function(){return Object(B["a"])(this.musicList).slice(0,6)}},created:function(){var t=JSON.parse(window.localStorage.getItem("personalized"));t&&t.expire>Date.now()?this.musicList=t.result:this.getPersonalized();var s=JSON.parse(window.localStorage.getItem("newSongList"));s&&s.expire>Date.now()?this.newSongList=s.result:this.getNewSong()}},gt=ut,dt=(n("e082"),Object(w["a"])(gt,R,X,!1,null,"b0931816",null)),ht=dt.exports,ft=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"hot"},[n("HomeLink"),n("div",{staticClass:"hot_bg"},[n("div",{staticClass:"hotCon"},[n("div",{staticClass:"hotIcon"}),n("div",{staticClass:"hotUpdate"},[t._v("更新日期:"+t._s(t.setUpdateTime()))])])]),n("ul",{staticClass:"hotSongCon"},t._l(t.hotSongList,(function(s,e){return n("track-songs",{key:e,attrs:{trackSongs:s,order:e,news:!1,currentSong:t.currentSong},on:{"translate-song":function(s){return t.$emit("translate-song",s)}}})})),1)],1)},pt=[],mt={name:"Hot",components:{HomeLink:Q,TrackSongs:y},props:{currentSong:Object},data:function(){return{hotSongList:[],updateTime:null}},methods:{getHotSong:function(){var t=this;this.axios.get("/top/list?idx=1").then((function(s){t.hotSongList=s.data.playlist.tracks,t.updateTime=s.data.playlist.updateTime,window.localStorage.setItem("hotRankingList",JSON.stringify({expire:24*Date.now()*60*60*1e3,result:Object(B["a"])(s.data.playlist.tracks).slice(0,20),updateTime:s.data.playlist.updateTime}))})).catch((function(t){console.log(t)}))},setUpdateTime:function(){var t=new Date(parseInt(this.updateTime)),s=t.getMonth()+1;s=s<10?"0"+s:s;var n=t.getDate();return n=n<10?"0"+n:n,s+"月"+n+"日"}},created:function(){var t=JSON.parse(window.localStorage.getItem("hotRankingList"));t&&t.expire>Date.now()?(this.hotSongList=t.result,this.updateTime=t.updateTime):this.getHotSong()}},vt=mt,St=(n("98b6"),Object(w["a"])(vt,ft,pt,!1,null,"0b553372",null)),wt=St.exports,Ct=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"search"},[n("HomeLink"),n("div",{staticClass:"searchBox"},[n("i",{staticClass:"fa fa-search"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],attrs:{type:"text",placeholder:t.defaultText},domProps:{value:t.searchText},on:{input:function(s){s.target.composing||(t.searchText=s.target.value)}}}),n("i",{directives:[{name:"show",rawName:"v-show",value:""!=t.searchText,expression:"searchText!=''"}],staticClass:"fa fa-close",on:{click:function(s){t.searchText=""}}})]),n("div",{directives:[{name:"show",rawName:"v-show",value:""==t.searchText.trim(),expression:"searchText.trim()==''"}],staticClass:"hotSearch"},[n("p",[t._v("热门搜索")]),n("div",{staticClass:"hotSearchBox"},t._l(t.hotWordList,(function(s,e){return n("span",{key:e,staticClass:"hotWord",on:{click:function(n){return t.send(s.first)}}},[t._v(t._s(s.first))])})),0)]),n("SearchRes",{directives:[{name:"show",rawName:"v-show",value:""!=t.searchText.trim(),expression:"searchText.trim()!=''"}],attrs:{searchText:t.searchText,associate:t.associate}})],1)},yt=[],_t=(n("498a"),function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"searchRes"},[t.showDefault?n("div",{staticClass:"res",on:{click:function(s){return t.send(t.searchText)}}},[n("p",[t._v('搜索"'+t._s(t.searchText)+'"')]),n("ul",{staticClass:"associate"},t._l(t.associate,(function(s,e){return n("li",{key:e,on:{click:function(n){return t.send(s.keyword)}}},[n("i",{staticClass:"fa fa-search"}),t._v(t._s(s.keyword))])})),0)]):n("div",{staticClass:"data"},t._l(t.dataList,(function(s,e){return n("search-songs",{key:e,attrs:{searchSongs:s},on:{"translate-song":function(s){t.currentSong=t.$emit}}})})),1)])}),Lt=[],kt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"searchSongs"},[n("div",{staticClass:"main"},[n("h3",[n("span",[t._v(t._s(t.searchSongs.name))])]),n("div",{staticClass:"info"},[n("i",{staticClass:"icon icon-quality"}),n("span",[t._v(t._s(t.artistConnect(t.searchSongs.artists)))])])]),n("i",{staticClass:"icon icon-play"})])},xt=[],bt={name:"SearchSongs",props:{searchSongs:Object},methods:{artistConnect:function(t){return t.map((function(t){return t.name})).join(" / ")}}},Tt=bt,Dt=(n("e6bb"),Object(w["a"])(Tt,kt,xt,!1,null,"11dd75cc",null)),Ot=Dt.exports,jt={name:"SearchRes",components:{SearchSongs:Ot},props:{searchText:String,associate:Array,state:Boolean},data:function(){return{showDefault:!0,dataList:[],currentSong:null}},methods:{send:function(t){var s=this;window.axios.get("search",{params:{keywords:t,type:1}}).then((function(t){t&&(s.showDefault=!1,s.dataList=t.data.result.songs)}))}},watch:{searchText:function(){this.showDefault=!0}}},It=jt,Pt=(n("94a4"),Object(w["a"])(It,_t,Lt,!1,null,"bef9ac42",null)),$t=Pt.exports,Nt={name:"Search",components:{HomeLink:Q,SearchRes:$t},props:{currentSong:Object},data:function(){return{searchText:"",defaultText:"搜索歌曲...",hotWordList:[],associate:null}},methods:{getSearchDefault:function(){var t=this;window.axios.get("search/default").then((function(s){t.defaultText=s.data.data.showKeyword}))},getSearchHot:function(){var t=this,s=JSON.parse(window.localStorage.getItem("searchHotWord"));s&&s.expire>Date.now()?this.hotWordList=s.result:window.axios.get("search/hot").then((function(s){t.hotWordList=s.data.result.hots,window.localStorage.setItem("searchHotWord",JSON.stringify({expire:Date.now()+216e5,result:s.data.result.hots}))}))},send:function(t){var s=this;window.axios.get("search",{params:{keywords:t,type:1}}).then((function(n){n&&(s.searchText=t,s.dataList=n.data.result.songs)}))}},created:function(){this.getSearchDefault(),this.getSearchHot()},watch:{searchText:function(t){var s=this;0!=t.trim()&&window.axios.get("search/suggest",{params:{keywords:t,type:"mobile"}}).then((function(t){s.associate=t.data.result.allMatch}))}}},Ut=Nt,Mt=(n("25d9"),Object(w["a"])(Ut,Ct,yt,!1,null,"46550280",null)),Ht=Mt.exports,qt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"playlist"},[t.songListDetail?[n("header",[n("div",{staticClass:"mask",style:{backgroundImage:"url("+t.songListDetail.coverImgUrl+")"}}),n("div",{staticClass:"lt"},[n("img",{attrs:{src:t.songListDetail.coverImgUrl,alt:""}}),n("span",{staticClass:"playCount"},[n("i",{staticClass:"fa fa-headphones"}),t._v(" "+t._s(t.returnCount(t.songListDetail.playCount))+" ")]),n("span",{staticClass:"icon"},[t._v("歌单")])]),n("div",{staticClass:"rt"},[n("h3",[t._v(t._s(t.songListDetail.name))]),n("img",{attrs:{src:t.songListDetail.creator.avatarUrl,alt:""}}),n("span",[t._v(t._s(t.songListDetail.creator.nickname))])])]),n("main",[n("div",{staticClass:"tag"},[n("span",[t._v("标签：")]),t._l(t.songListDetail.tags,(function(s,e){return n("i",{key:e},[t._v(t._s(s))])}))],2),n("div",{staticClass:"abstract",class:{show:t.showMoreDesc}},[n("span",[t._v("简介：")]),n("span",[t._v(t._s(t.songListDetail.description))])]),n("div",{staticClass:"more",on:{click:function(s){t.showMoreDesc=!t.showMoreDesc}}},[t.showMoreDesc?n("i",{staticClass:"fa fa-angle-up"}):n("i",{staticClass:"fa fa-angle-down"})])]),n("h3",{staticClass:"allSongList"},[t._v("歌曲列表")]),t._l(t.trackSongList,(function(s,e){return n("track-songs",{key:e,attrs:{order:e,trackSongs:s,news:!1,currentSong:t.currentSong},on:{"translate-song":function(s){return t.$emit("translate-song",s)}}})}))]:t._e()],2)},Et=[],Jt={name:"Personalized",components:{TrackSongs:y},data:function(){return{songListId:this.$route.query.id,songListDetail:null,showMoreDesc:!1,trackSongList:[]}},props:{currentSong:Object},methods:{returnCount:function(t){return t>1e8?(t/1e8).toFixed(1)+"亿":t>1e4?(t/1e4).toFixed(1)+"万":t}},beforeRouteEnter:function(t,s,n){var e=JSON.parse(window.localStorage.getItem("sl-"+t.query.id));e&&e.expire>Date.now()?n((function(s){s.songListId=Number(t.query.id),s.songListDetail=e.result,s.trackSongList=e.tracks})):window.axios.get("playlist/detail",{params:{id:t.query.id}}).then((function(s){var e=s.data.playlist,a=s.data.playlist.tracks;window.localStorage.setItem("sl-"+t.query.id,JSON.stringify({expire:Date.now()+36e5,result:s.data.playlist,tracks:s.data.playlist.tracks})),n((function(s){s.songListId=Number(t.query.id),s.songListDetail=e,s.trackSongList=a}))})).catch((function(t){console.log(t)}))}},Wt=Jt,zt=(n("4b5e"),Object(w["a"])(Wt,qt,Et,!1,null,"d00b9110",null)),Rt=zt.exports;e["a"].use(z["a"]);var Xt=[{path:"/",name:"Home",component:ht},{path:"/hot",name:"Hot",component:wt},{path:"/search",name:"Search",component:Ht},{path:"/personalized",name:"Personalized",component:Rt}],Bt=new z["a"]({routes:Xt}),Ft=Bt;e["a"].config.productionTip=!1,new e["a"]({router:Ft,store:c,render:function(t){return t(W)}}).$mount("#app")},5759:function(t,s,n){},"7c55":function(t,s,n){"use strict";var e=n("2395"),a=n.n(e);a.a},"803f":function(t,s,n){t.exports=n.p+"img/playing.ab1993a5.svg"},"94a4":function(t,s,n){"use strict";var e=n("a6e2"),a=n.n(e);a.a},"95f4":function(t,s,n){},9753:function(t,s,n){},"98b6":function(t,s,n){"use strict";var e=n("95f4"),a=n.n(e);a.a},"9b17":function(t,s,n){"use strict";var e=n("c0b2"),a=n.n(e);a.a},a219:function(t,s,n){},a6e2:function(t,s,n){},a841:function(t,s,n){"use strict";var e=n("a219"),a=n.n(e);a.a},b639:function(t,s,n){"use strict";var e=n("4ce2"),a=n.n(e);a.a},b9a7:function(t,s,n){},c0b2:function(t,s,n){},c7bd:function(t,s,n){},e082:function(t,s,n){"use strict";var e=n("5759"),a=n.n(e);a.a},e6bb:function(t,s,n){"use strict";var e=n("c7bd"),a=n.n(e);a.a},e8ad:function(t,s,n){},eac3:function(t,s,n){},f13d:function(t,s,n){"use strict";var e=n("fbfc"),a=n.n(e);a.a},f33d:function(t,s,n){"use strict";var e=n("b9a7"),a=n.n(e);a.a},fbfc:function(t,s,n){}});
//# sourceMappingURL=app.c56a876a.js.map